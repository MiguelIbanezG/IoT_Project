<div class="page-layout">
  <!-- ğŸ“„ TÃ­tulo principal -->
  <header class="page-header">
    <h1>Panel de Control de HabitaciÃ³n Inteligente</h1>
  </header>

  <!-- ğŸ“¹ SecciÃ³n de CÃ¡maras y MicrÃ³fono -->
  <section class="camera-section">
    <div class="video-live">
      <h2>Video en Vivo Procesado</h2>
      <img [src]="videoStreamUrl" alt="Video en vivo" />

      <div class="video-wrapper">
        <button class="camera-btn open" (click)="openCamera()">ğŸ” Abrir CÃ¡mara</button>
        <button class="camera-btn" (click)="captureImage()">ğŸ“¸ Tomar Foto</button>
      </div>

      <div class="stream-wrapper" *ngIf="photoUrl && showPhoto">
        <div class="photo-container">
          <a [href]="photoUrl" target="_blank">
            <img [src]="photoUrl" alt="Foto tomada" class="captured-photo" />
          </a>
          <button class="camera-btn close" (click)="closePhoto()">Cerrar Foto</button>
        </div>
      </div>

      <!-- ğŸ‘ï¸ Estado de detecciÃ³n -->
    <section class="status-section">
      <h2>ğŸ›¡ï¸ Estado de DetecciÃ³n</h2>
      <p>ğŸ”´ Objetos peligrosos detectados: {{ statusDangerousObjects }}</p>
      <p>ğŸ§â€â™‚ï¸ Personas detectadas: {{ statusPeopleDetected }}</p>
      <p>ğŸ•µï¸ Personas sospechosas detectadas: {{ statusSuspiciousPeople }}</p>
    </section>

    </div>

    <button 
      class="microphone-toggle" 
      [ngClass]="{ 'listening': isListening }"
      (click)="toggleVoiceRecognition()">
      ğŸ¤
    </button>
  </section>

  <!-- ğŸ”¦ SecciÃ³n de Luces y Modos -->
  <section class="lights-section">
    <div class="modes-group">
      <div>
        <div>
          <h2>ğŸ‰ Modo Fiesta</h2>
          <button class="party" (click)="startPartyMode()" *ngIf="!partyModeActive">Activar ğŸŠ</button>
          <button class="stop-party" (click)="stopPartyMode()" *ngIf="partyModeActive">Desactivar ğŸš«</button>
        </div>
  
        <div>
          <h2>ğŸš¨ Modo Alerta</h2>
          <button class="alert" (click)="startAlertMode()" *ngIf="!alertModeActive">Activar âš ï¸</button>
          <button class="stop-alert" (click)="stopAlertMode()" *ngIf="alertModeActive">Desactivar ğŸš«</button>
        </div>
  
        <div >
          <h2>ğŸ”¥ Modo CÃ¡lido</h2>
          <button class="warm" (click)="startWarmMode()" *ngIf="!warmModeActive">Activar ğŸŒ…</button>
          <button class="stop-warm" (click)="stopWarmMode()" *ngIf="warmModeActive">Desactivar ğŸš«</button>
        </div>
      </div>
      <div class="lights-image2">
        <img src="assets/image2.png" alt="Icono de luces" />
      </div>
    </div>

    <div class="lights-group">
      <div>
        <div class="aa">
          <h2>ğŸ’¡ LÃ¡mpara Izquierda | Estado: {{ leftLampState?.state || '?' }}</h2>
          <button class="on" (click)="turnOnLeftLamp()">Encender ğŸ”†</button>
          <button class="off" (click)="turnOffLeftLamp()">Apagar ğŸ’¡</button>
        </div>
  
        <div class="aa">
          <h2>ğŸ”¹ LÃ¡mpara Derecha | Estado: {{ rightLampState?.state || '?' }}</h2>
          <button class="on" (click)="turnOnRightLamp()">Encender ğŸ”¹</button>
          <button class="off" (click)="turnOffRightLamp()">Apagar ğŸ’¡</button>
        </div>
  
        <div class="aa">
          <h2>ğŸ“– Luz de Lectura | Estado: {{ readingLampState?.state || 'Desconocido' }}</h2>
          <button class="on" (click)="turnOnReadingLamp()">Encender ğŸ“š</button>
          <button class="off" (click)="turnOffReadingLamp()">Apagar ğŸ’¡</button>
        </div>
      </div>
      <div class="lights-image">
        <img src="assets/image.png" alt="Icono de luces" />
      </div>
    </div>

  </section>
</div>